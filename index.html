<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>FedeAnalytics — SALGA Ontology Viewer</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://unpkg.com/cytoscape@3.23.0/dist/cytoscape.min.js"></script>
<script src="https://unpkg.com/dagre@0.8.5/dist/dagre.min.js"></script>
<script src="https://unpkg.com/cytoscape-dagre@2.5.0/cytoscape-dagre.js"></script>

<style>
  html, body { height:100%; margin:0; background:#0f1720; color:white; font-family:Arial; }
  header { height:70px; background:#081421; padding:12px 20px; display:flex; justify-content:space-between; align-items:center; }
  #cy { height: calc(100% - 70px); width:100%; }
  button { padding:6px 12px; background:#1f6feb; border:none; color:white; border-radius:6px; cursor:pointer; }
</style>
</head>

<body>
<header>
  <div>
    <div style="font-size:18px;font-weight:700;">FedeAnalytics — SALGA Ontology Viewer</div>
    <div style="font-size:12px;opacity:0.8;">GitHub Pages Version</div>
  </div>

  <button onclick="cy.fit()">Fit</button>
</header>

<div id="cy"></div>

<script>
cytoscape.use(cytoscapeDagre);

// LOAD EXTERNAL JSON
fetch("./data/graph.json")
  .then(r => r.json())
  .then(graph => {
    const cy = window.cy = cytoscape({
      container: document.getElementById('cy'),
      elements: graph,
      layout: { name:'dagre', rankDir:'TB' },
      style: [
        {
          selector: 'node[type="ontology"]',
          style: {
            'background-color': '#2c6cf4',
            'label': 'data(label)',
            'color': 'white',
            'text-outline-width': 3,
            'text-outline-color': '#0f1720'
          }
        },
        {
          selector: 'node[type="datasource"]',
          style: {
            'background-color': '#00a88b',
            'shape': 'round-rectangle',
            'label': 'data(label)',
            'color': '#012d26'
          }
        },
        {
          selector: 'edge',
          style: {
            'line-color': '#aaa',
            'target-arrow-color': '#aaa',
            'target-arrow-shape': 'triangle',
            'label': 'data(label)',
            'color': '#FFD700'                 // YELLOW label text
            //'font-size': 10,                      // optional but recommended
            //'text-outline-color': '#000',         // improves readability
            //'text-outline-width': 1
          }
        }
      ]
    });
  });
</script>

</body>
</html>
